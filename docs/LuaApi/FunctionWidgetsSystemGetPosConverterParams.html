
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
            
<html>

<meta content="text/html; charset=UTF-8" http-equiv="content-type">
            
<head>
<title>Пользовательские дополнения - Lua API - FunctionWidgetsSystemGetPosConverterParams</title>
<link href="LuaApi.css" rel="stylesheet" type="text/css">
</head>
<body>
<h1>Пользовательские дополнения</h1>
<p><a href="../Index.html">На главную</a></p>
<hr>
<p></p>
<h2> GetPosConverterParams( self )</h2>
<p></p>
<p>Возвращает параметры окна игры. См. также: <a href="EventPosConverterChanged.html"> EVENT_POS_CONVERTER_CHANGED</a>.</p>
<p></p>
<p>Существует две системы координат экрана игры - виртуальная и реальная. Обе начинают отсчёт с нуля, от верхнего-левого угла клиентской области окна (а в полноэкранном режиме - экрана), обе используются для указания местоположений и размеров виджетов. Виртуальные единицы существуют специально для позиционирования виджетов, поэтому, они используются наиболее часто - по ним позиционируются виджеты, позиционируемые по WIDGET_ALIGN_LOW, WIDGET_ALIGN_HIGH, WIDGET_ALIGN_CENTER, WIDGET_ALIGN_BOTH. Реальные (абсолютные) единицы используются крайне редко, только для тех виджетов, которые позиционируются по WIDGET_ALIGN_LOW_ABS.</p>
<p></p>
<p>Текущий виртуальный размер окна - по одной из осей равен базовому размеру окна, а по другой варьируется, в зависимости от пропорций окна (или экрана). Например, если пропорции окна шире чем 5:4, то виртуальная высота будет равна 1024, а ширина будет рассчитана относительно высоты, и в данном случае, будет превышать 1280. И наоборот, если пропорции окна уже 5:4, то виртуальная ширина будет равна 1280, а виртуальная высота будет рассчитана относительно ширины, и будет превышать 1024.</p>
<p></p>
<p>Реальный размер окна - размер в реальных пикселях операционной системы.</p>
<p></p>
<p>Базовый размер окна - это константы (1280x1024), используемые для рассчёта виртуального размера окна. Виртуальные ширина и высота окна никогда не бывают меньше этих базовых величин.</p>
<p></p>
<p>DEPRECATED: Функция устарела и помечена к удалению. Используйте аналогичную функцию из библиотеки common <a href="FunctionCommonGetPosConverterParams.html">common.GetPosConverterParams()</a></p>
<p></p>
<pre>
-- класс
WidgetsSystemSafe

-- семантика
function GetPosConverterParams( self )

-- входные параметры
нет

-- возвращаемое значение:
таблица с полями:
 fullVirtualSizeX: number( float ) - текущий виртуальный размер окна по X
 fullVirtualSizeY: number( float ) - текущий виртуальный размер окна по Y

 realSizeX: number( float ) - реальный размер окна по X
 realSizeY: number( float ) - реальный размер окна по Y

 referenceVirtualSizeX: number( float ) - базовый виртуальный размер окна по X
 referenceVirtualSizeY: number( float ) - базовый виртуальный размер окна по Y

-- пример
local posConverter = widgetsSystem:GetPosConverterParams()

LogInfo( "fullVirtualSizeX: ", posConverter.fullVirtualSizeX )
LogInfo( "fullVirtualSizeY: ", posConverter.fullVirtualSizeY )
LogInfo( "realSizeX: ", posConverter.realSizeX )
LogInfo( "realSizeY: ", posConverter.realSizeY )
LogInfo( "referenceVirtualSizeX: ", posConverter.referenceVirtualSizeX )
LogInfo( "referenceVirtualSizeY: ", posConverter.referenceVirtualSizeY )

При резолюции экрана 1920x1200, в полноэкранном режиме, результат будет такой:

fullVirtualSizeX: 1638.4001464844
fullVirtualSizeY: 1024
realSizeX: 1920
realSizeY: 1200
referenceVirtualSizeX: 1280
referenceVirtualSizeY: 1024
</pre>
<p></p>
<h4>Search: "CategoryWidgetsSystem"</h4>
<p></p>
<a href="CategoryWidgetsSystem.html">CategoryWidgetsSystem</a>
<br><a href="EventUpdateShrinkRatio.html">EventUpdateShrinkRatio</a>
<br><a href="FunctionWidgetsSystemGetImeSelectorInfo.html">FunctionWidgetsSystemGetImeSelectorInfo</a>
<br><a href="FunctionWidgetsSystemGetPosConverterParams.html">FunctionWidgetsSystemGetPosConverterParams</a>
<br><a href="FunctionWidgetsSystemGetStyle.html">FunctionWidgetsSystemGetStyle</a>
<br><a href="FunctionWidgetsSystemGetTextureSize.html">FunctionWidgetsSystemGetTextureSize</a>
<br><a href="FunctionWidgetsSystemSelectImeText.html">FunctionWidgetsSystemSelectImeText</a>
<br><a href="FunctionWidgetsSystemSetShrinkRatio.html">FunctionWidgetsSystemSetShrinkRatio</a>
<p></p>
<hr>
<a href="CategoryLuaApi.html">CategoryLuaApi</a>
<a href="CategoryLuaApiDeprecated.html">CategoryLuaApiDeprecated</a>
<a href="CategoryFunction.html">CategoryFunction</a>
<a href="CategoryWidgetsSystem.html">CategoryWidgetsSystem</a>
<hr>
<p><a href="../Index.html">На главную</a></p>
</body>
</html>
