
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
            
<html>

<meta content="text/html; charset=UTF-8" http-equiv="content-type">
            
<head>
<title>Пользовательские дополнения - Lua API - FunctionAvatarGetClassChangerInfo</title>
<link href="LuaApi.css" rel="stylesheet" type="text/css">
</head>
<body>
<h1>Пользовательские дополнения</h1>
<p><a href="../Index.html">На главную</a></p>
<hr>
<p></p>
<h2> avatar.GetClassChangerInfo()</h2>
<p></p>
<p>Возвращает информацию, необходимую для смены класса аватара, например варианты для замены вещей на подходящие новому классу. Имеет смысл, только если аватар находится в соответствующем состоянии (см. <a href="EventCharacterClassChangerChanged.html"> EVENT_CHARACTER_CLASS_CHANGER_CHANGED</a>), когда класс для замены уже выбран (для выбора используется <a href="TypeQuestionLibClassSelectQuestion.html"> ClassSelectQuestion</a>) и требуется уточнить детали замены.</p>
<p></p>
<pre>
-- библиотека:
avatar

-- объявление:
function GetClassChangerInfo()

-- параметры:
нет

-- возвращаемые значения:
table or nil - nil если аватар не находится в соответствующей фазе смены класса; иначе таблица с данными о замене класса
поля:
  charClassId: ResourceId - идентификатор ресурса CharacterClass: на какой класс меняем класс
  substs: table of tables или nil - список возможных замен для имеющихся у аватара вещей: nil если таких вещей нет, иначе список таблиц с полями:
    itemId: ObjectId - идентификатор имеющейся у аватара вещи, которая будет заменена
    itemSubstitutions: table of tables - список описаний возможных замен этой вещи (нужно будет выбрать одну из них, см. avatar.SetClassChangerInfo( changeList )): список таблиц с полями:
      itemSubstituteParts: table of tables of tables - список замен, которые могут быть выданы (все вместе) взамен имеющейся у аватара вещи (как правило одна вещь, но возможна замена двуручной вещи на пару право/леворучных) или отобраны вместе с ней (например в случае замены пары право/леворучных вещей на двуручную); каждый элемент списка является таблицей-списком, из которого нужно выбрать одну замену; каждый элемент такой вложенной таблицы-списка является таблицей с полями:
        substItemId: ObjectId - идентификатор вещи, которая будет выдана; если выбирается именно эта замена, то этот идентификатор впоследствии должен быть передан в avatar.SetClassChangerInfo( changeList ) как один из элементов списка changeList
        isRemoved: boolean - если false, то такая вещь будет выдана аватару при замене; если true, то эта вещь будет отобрана у аватара
        enchantsSubstitutions: table of tables - список замен самоцветов (для всех самоцветов, вставленных в заменяемую вещь и подлежащих замене): список таблиц с полями:
          sourceEnchantItemId: ObjectId - идентификатор самоцвета, который будет заменён
          oneOfEnchantSubstitution: table of ObjectId - список id самоцветов, один из которых надо выбрать на замену (см. avatar.SetClassChangerInfo( changeList ))
</pre>
<p></p>
<p>Пример:</p>
<pre>
local info = avatar.GetClassChangerInfo()
</pre>
<p></p>
<p>См. также</p>
<p></p>
<ul><li><p> <a href="EventCharacterClassChangerChanged.html"> EVENT_CHARACTER_CLASS_CHANGER_CHANGED</a></p></li></ul>
<ul><li><p> <a href="FunctionAvatarSetClassChangerInfo.html"> avatar.SetClassChangerInfo(  changeList  )</a></p></li></ul>
<ul><li><p> <a href="FunctionAvatarCancelClassChanger.html"> avatar.CancelClassChanger()</a></p></li></ul>
<p></p>
<p></p>
<h4>Search: "CategoryLuaApi" "CategoryAvatarInfo" </h4>
<p></p>
<a href="EnumCreatureStat.html">EnumCreatureStat</a>
<br><a href="EnumSpecialStatType.html">EnumSpecialStatType</a>
<br><a href="EnumsResistances.html">EnumsResistances</a>
<br><a href="EventAvatarAliveChanged.html">EventAvatarAliveChanged</a>
<br><a href="EventAvatarBarriersChanged.html">EventAvatarBarriersChanged</a>
<br><a href="EventAvatarCreated.html">EventAvatarCreated</a>
<br><a href="EventAvatarStalkerDamagePoolAdded.html">EventAvatarStalkerDamagePoolAdded</a>
<br><a href="EventAvatarStalkerDamagePoolChanged.html">EventAvatarStalkerDamagePoolChanged</a>
<br><a href="EventAvatarStalkerDamagePoolRemoved.html">EventAvatarStalkerDamagePoolRemoved</a>
<br><a href="EventAvatarStatsChanged.html">EventAvatarStatsChanged</a>
<br><a href="EventAvatarTargetTargetChanged.html">EventAvatarTargetTargetChanged</a>
<br><a href="EventAvatarWarriorDamagePoolAdded.html">EventAvatarWarriorDamagePoolAdded</a>
<br><a href="EventAvatarWarriorDamagePoolChanged.html">EventAvatarWarriorDamagePoolChanged</a>
<br><a href="EventAvatarWarriorDamagePoolRemoved.html">EventAvatarWarriorDamagePoolRemoved</a>
<br><a href="EventCharacterClassChangerChanged.html">EventCharacterClassChangerChanged</a>
<br><a href="EventDruidPetCommandPointsChanged.html">EventDruidPetCommandPointsChanged</a>
<br><a href="EventFairyBonusChanged.html">EventFairyBonusChanged</a>
<br><a href="EventNecromancerBloodPoolChanged.html">EventNecromancerBloodPoolChanged</a>
<br><a href="FunctionAvatarCalcCurrentGearScore.html">FunctionAvatarCalcCurrentGearScore</a>
<br><a href="FunctionAvatarCancelClassChanger.html">FunctionAvatarCancelClassChanger</a>
<br><a href="FunctionAvatarChangeFairyBonus.html">FunctionAvatarChangeFairyBonus</a>
<br><a href="FunctionAvatarGetBarriersDelay.html">FunctionAvatarGetBarriersDelay</a>
<br><a href="FunctionAvatarGetBarriersInfo.html">FunctionAvatarGetBarriersInfo</a>
<br><a href="FunctionAvatarGetClass.html">FunctionAvatarGetClass</a>
<br><a href="FunctionAvatarGetClassChangerBonusStats.html">FunctionAvatarGetClassChangerBonusStats</a>
<br><a href="FunctionAvatarGetClassChangerInfo.html">FunctionAvatarGetClassChangerInfo</a>
<br><a href="FunctionAvatarGetClassChangerRangeBonusStats.html">FunctionAvatarGetClassChangerRangeBonusStats</a>
<br><a href="FunctionAvatarGetClassId.html">FunctionAvatarGetClassId</a>
<br><a href="FunctionAvatarGetDeviceList.html">FunctionAvatarGetDeviceList</a>
<br><a href="FunctionAvatarGetDruidPetCommandPoints.html">FunctionAvatarGetDruidPetCommandPoints</a>
<br><a href="FunctionAvatarGetGearScoreInfo.html">FunctionAvatarGetGearScoreInfo</a>
<br><a href="FunctionAvatarGetHealthRegen.html">FunctionAvatarGetHealthRegen</a>
<br><a href="FunctionAvatarGetId.html">FunctionAvatarGetId</a>
<br><a href="FunctionAvatarGetInnateStatDescription.html">FunctionAvatarGetInnateStatDescription</a>
<br><a href="FunctionAvatarGetInnateStats.html">FunctionAvatarGetInnateStats</a>
<br><a href="FunctionAvatarGetItemClassList.html">FunctionAvatarGetItemClassList</a>
<br><a href="FunctionAvatarGetMainhandSpeed.html">FunctionAvatarGetMainhandSpeed</a>
<br><a href="FunctionAvatarGetManaRegen.html">FunctionAvatarGetManaRegen</a>
<br><a href="FunctionAvatarGetNecromancerBloodPool.html">FunctionAvatarGetNecromancerBloodPool</a>
<br><a href="FunctionAvatarGetNextLevelUnlockInfo.html">FunctionAvatarGetNextLevelUnlockInfo</a>
<br><a href="FunctionAvatarGetOffhandSpeed.html">FunctionAvatarGetOffhandSpeed</a>
<br><a href="FunctionAvatarGetPower.html">FunctionAvatarGetPower</a>
<br><a href="FunctionAvatarGetRangedSpeed.html">FunctionAvatarGetRangedSpeed</a>
<br><a href="FunctionAvatarGetRecommendedStats.html">FunctionAvatarGetRecommendedStats</a>
<br><a href="FunctionAvatarGetResistances.html">FunctionAvatarGetResistances</a>
<br><a href="FunctionAvatarGetServerId.html">FunctionAvatarGetServerId</a>
<br><a href="FunctionAvatarGetSpecialStats.html">FunctionAvatarGetSpecialStats</a>
<br><a href="FunctionAvatarGetStamina.html">FunctionAvatarGetStamina</a>
<br><a href="FunctionAvatarGetStatsBonusesPart.html">FunctionAvatarGetStatsBonusesPart</a>
<br><a href="FunctionAvatarGetUniqueId.html">FunctionAvatarGetUniqueId</a>
<br><a href="FunctionAvatarGetUnitList.html">FunctionAvatarGetUnitList</a>
<br><a href="FunctionAvatarGetViewedBuildFreeRubyPoints.html">FunctionAvatarGetViewedBuildFreeRubyPoints</a>
<br><a href="FunctionAvatarGetViewedBuildFreeStatPoints.html">FunctionAvatarGetViewedBuildFreeStatPoints</a>
<br><a href="FunctionAvatarGetViewedBuildFreeTalentPoints.html">FunctionAvatarGetViewedBuildFreeTalentPoints</a>
<br><a href="FunctionAvatarGetWisdom.html">FunctionAvatarGetWisdom</a>
<br><a href="FunctionAvatarIsAbleToMove.html">FunctionAvatarIsAbleToMove</a>
<br><a href="FunctionAvatarIsAlive.html">FunctionAvatarIsAlive</a>
<br><a href="FunctionAvatarIsExist.html">FunctionAvatarIsExist</a>
<br><a href="FunctionAvatarIsNavigateToPoint.html">FunctionAvatarIsNavigateToPoint</a>
<br><a href="FunctionAvatarIsNextLevelLocked.html">FunctionAvatarIsNextLevelLocked</a>
<br><a href="FunctionAvatarSetClassChangerInfo.html">FunctionAvatarSetClassChangerInfo</a>
<br><a href="FunctionCommonIsEqualStats.html">FunctionCommonIsEqualStats</a>
<br><a href="InnateStatSecondary.html">InnateStatSecondary</a>
<br><a href="UniqueId.html">UniqueId</a>
<p></p>
<hr>
<p></p>
<a href="CategoryLuaApi.html">CategoryLuaApi</a>
<a href="CategoryFunction.html">CategoryFunction</a>
<a href="CategoryAvatar.html">CategoryAvatar</a>
<a href="CategoryAvatarInfo.html">CategoryAvatarInfo</a>
<hr>
<p><a href="../Index.html">На главную</a></p>
</body>
</html>
