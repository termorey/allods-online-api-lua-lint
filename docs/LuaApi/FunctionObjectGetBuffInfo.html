
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
            
<html>

<meta content="text/html; charset=UTF-8" http-equiv="content-type">
            
<head>
<title>Пользовательские дополнения - Lua API - FunctionObjectGetBuffInfo</title>
<link href="LuaApi.css" rel="stylesheet" type="text/css">
</head>
<body>
<h1>Пользовательские дополнения</h1>
<p><a href="../Index.html">На главную</a></p>
<hr>
<p></p>
<h2> object.GetBuffInfo( Id )</h2>
<p></p>
<p>Возвращает информацию об указанном буфе для данного нтерактивного объекта.</p>
<p>Принимает как идентификатор бафа, висящего на объекте, так и идентификатор ресурса бафа.</p>
<p></p>
<pre>
-- система:
UIState/GameState

-- библиотека:
object

-- объявление:
function GetBuffInfo( Id )

-- параметры:
Id: ObjectId or BuffId - идентификатор или объекта или ресурса буфа

-- возвращаемые значения: table or nil, поля:
id: ObjectId - Id объекта буфа
buffId: BuffId - Id ресурса буфа

ownerId: ObjectId or nil - Id объекта, на котором висит буф, если такой объект есть

name: WString - имя буфа
description: ValuedText or nil - описание буфа
debugName: string or nil - отладочная информация (путь до файла) или nil для отладочной версии
sysName: string - внутреннее имя буфа (может быть использовано для специальной обработки), соответствующее поле в базе для буфа - "sysUIScriptName"

durationMs: number (int) - полное время действия буфа
remainingMs: number (int) - время до окончания действия буфа

isStackable: boolean - стекается буф или нет
stackCount: number (int) - может быть количеством одинаковых буфов, уровенем буфа или аналогичной информаций в
stackLimit: number (int) - максимальное количество буфов данного типа

isPositive: boolean - true, если баф позитивный
isGradual: boolean - true,  если true, то стэки бафа спадают по одному

canDetach: boolean - можно ли скликивать такой баф
isNeedVisualize: boolean - нужно ли показывать этот баф в панели бафов
isNeedVisualizeDuration: boolean - нужно ли показывать duration
interfaceHighPriority: boolean - необходимо постараться обязательно показать баф в интерфейсе

gainSpells: table of SpellId or nil - список заклинаний, которые усиливает данный баф; таблица индексированная с 1; если таблица пустая то вернется nil

groups: таблица:
 &lt;number&gt;: string - отладочное имя группы
producer: table - таблица с полями
  casterId: ObjectId or nil - идентификатор кастера, повесившего баф, если его можно получить
  spellId: SpellId or nil - Id спелла, если баф повесили спеллом.
  abilityId: AbilityId or nil - Id абилки, если баф повесили абилкой.
  buffId: BuffId or nil - Id буффа, если баф повесили бафом.

--{ часть таблицы, реализованная только для UI
texture: TextureId - идентификатор текстуры для иконки буфа
--}


--{ часть таблицы, отрезаемая в финальной сборке
debugGroups: таблица:
 &lt;number&gt;: string - имя группы
--}

-- пример:
local id = object.GetBuffs( avatar.GetId() )[ 0 ]
if id then
  local buffInfo = object.GetBuffInfo( id )
  if buffInfo then
    local name = buffInfo.name
  end
end
</pre>
<p></p>
<h4>Связанные страницы: "CategoryLuaApi" "CategoryBuff"</h4>
<p></p>
<a href="BuffId.html">BuffId</a>
<br><a href="CategoryBuff.html">CategoryBuff</a>
<br><a href="EnumDiminishingGroup.html">EnumDiminishingGroup</a>
<br><a href="EventAvatarBuffRemovingFailed.html">EventAvatarBuffRemovingFailed</a>
<br><a href="EventGuildBuffAdded.html">EventGuildBuffAdded</a>
<br><a href="EventGuildBuffsChanged.html">EventGuildBuffsChanged</a>
<br><a href="EventObjectBuffAdded.html">EventObjectBuffAdded</a>
<br><a href="EventObjectBuffProgressAdded.html">EventObjectBuffProgressAdded</a>
<br><a href="EventObjectBuffProgressRemoved.html">EventObjectBuffProgressRemoved</a>
<br><a href="EventObjectBuffRemoved.html">EventObjectBuffRemoved</a>
<br><a href="EventObjectBuffsChanged.html">EventObjectBuffsChanged</a>
<br><a href="EventObjectBuffsElementChanged.html">EventObjectBuffsElementChanged</a>
<br><a href="EventObjectDiminishingChanged.html">EventObjectDiminishingChanged</a>
<br><a href="EventObjectDiminishingGroupChanged.html">EventObjectDiminishingGroupChanged</a>
<br><a href="FunctionAvatarGetBuffInfoById.html">FunctionAvatarGetBuffInfoById</a>
<br><a href="FunctionAvatarIsBuffDisease.html">FunctionAvatarIsBuffDisease</a>
<br><a href="FunctionAvatarIsBuffMagic.html">FunctionAvatarIsBuffMagic</a>
<br><a href="FunctionAvatarIsBuffPoison.html">FunctionAvatarIsBuffPoison</a>
<br><a href="FunctionGuildGetBuffInfo.html">FunctionGuildGetBuffInfo</a>
<br><a href="FunctionGuildGetBuffs.html">FunctionGuildGetBuffs</a>
<br><a href="FunctionObjectGetBuffBySysName.html">FunctionObjectGetBuffBySysName</a>
<br><a href="FunctionObjectGetBuffCount.html">FunctionObjectGetBuffCount</a>
<br><a href="FunctionObjectGetBuffDynamicInfo.html">FunctionObjectGetBuffDynamicInfo</a>
<br><a href="FunctionObjectGetBuffInfo.html">FunctionObjectGetBuffInfo</a>
<br><a href="FunctionObjectGetBuffInstances.html">FunctionObjectGetBuffInstances</a>
<br><a href="FunctionObjectGetBuffs.html">FunctionObjectGetBuffs</a>
<br><a href="FunctionObjectGetBuffsInfo.html">FunctionObjectGetBuffsInfo</a>
<br><a href="FunctionObjectGetBuffsWithProperties.html">FunctionObjectGetBuffsWithProperties</a>
<br><a href="FunctionObjectGetBuffSysName.html">FunctionObjectGetBuffSysName</a>
<br><a href="FunctionObjectGetDiminishingState.html">FunctionObjectGetDiminishingState</a>
<br><a href="FunctionObjectRemoveBuff.html">FunctionObjectRemoveBuff</a>
<p></p>
<hr>
<a href="CategoryLuaApi.html">CategoryLuaApi</a>
<a href="CategoryFunction.html">CategoryFunction</a>
<a href="CategoryObject.html">CategoryObject</a>
<a href="CategoryBuff.html">CategoryBuff</a>
<hr>
<p><a href="../Index.html">На главную</a></p>
</body>
</html>
